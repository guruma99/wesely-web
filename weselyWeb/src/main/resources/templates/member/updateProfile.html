<!DOCTYPE html>
<!-- Thymeleaf를 사용하겠다. -->
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>회원정보수정 페이지</title>

	<script src="/webjars/jquery/3.6.4/dist/jquery.min.js"></script>
	<script src="/webjars/axios/1.4.0/dist/axios.min.js"></script>
	<link rel="stylesheet" href="/css/font.css" />
	<link rel="stylesheet" href="/css/header.css" />
	<link rel="stylesheet" href="/css/member/update.css">
	<script src="/js/member/updateProfile.js" defer></script>

</head>

<body>
	<div class="wrapper">
		<header>
			<div class="logo">
				<a href="/">
					<img src="/images/weLogo.png" alt="Logo" />
				</a>
			</div>
			<nav class="bar">
				<a href="/store/"><strong>운동시설검색</strong></a>
				<a href="/community/"><strong>커뮤니티</strong></a>
				<a href="/"><strong>고객센터</strong></a>
			</nav>
			<nav class="login">
				<th:block th:if="${session.mvo == null}">
					<a href="/member/login"><strong>로그인</strong></a>
					<a href="/member/join"><strong>회원가입</strong></a>
				</th:block>
				<th:block th:if="${session.mvo != null}">
					<a href="/member/updateProfile"><strong>마이페이지</strong></a>
					<a href="/member/logout"><strong>로그아웃</strong></a>
					<a href="/"><strong>비즈니스 계정</strong></a>
				</th:block>
			</nav>
		</header>

		<!-- 프로필 수정 메인폼 -->
		<main>

			<div id="update">
				<div>
					<div class="title">프로필 수정
						<img src="/images/wesely_logo.png" alt="wesely로고" width="50px" style="float: right;">
					</div>
				</div>

				<div>
					<!--
					<div class="profileImage" colspan="2">
						<label for="profileimage">프로필 사진</label>
						<button id="btn-modal">
							<img src="/src/main/resources/static/images/Profile.png" class="profile-photo"
								width="100" height="100" style="border-radius: 70%; overflow: hidden;" />
						</button>
					</div>
					-->

					<!-- 이미지 미리보기 버튼 : 클릭 시 모달 창 열림 -->
					<div class="preview-button" id="preview-btn">
						<img src="/images/Profile.png" alt="프로필 사진" id="profile-image" />
					</div>

					<!-- 모달창 -->
					<div class="modal-overlay" id="modal">
						<div class="modal-window">
							<div class="title">
								프로필 사진 등록
							</div>
							<!-- 모달 닫기 버튼 -->
							<span class="close-button">&times;</span>

							<!-- 파일 선택 -->
							<input type="file" id="upload" style="display: none;"
								accept="image/gif, image/png, image/jpeg">

							<!-- 이미지 미리보기 div-->
							<label for="upload">
								<div id="image-preview" style="cursor: pointer;">
									<img src="/images/Profile.png" alt="" class="modal-photo" style="width: 150px; height: 150px;">
								</div>
							</label>
							
							<!-- 등록 버튼 -->
							<input type="submit-button" id="photo_submit" value="등록" />
						</div>
					</div>

				</div>



				<form action="/member/updateProfileOk" method="post" onsubmit="return formCheck()">

					<div class="nickName">
						<input type="hidden" id="userid" name="userid" th:value="${session.mvo.userid}" />

						<label for="nickname">닉네임</label>
						<!-- 회원가입 시 닉네임을 설정하지 않았다면 아이디가 기본으로 보여진다!! -->
						<input type="text" id="nickname" name="nickname" th:value="${session.mvo.nickname}" />
						<span id="nickmessage" />
					</div>
					<div class="username">
						<label for="username">이름</label>
						<input type="text" id="username" name="username" th:placeholder="${session.mvo.username}"
							readonly />
					</div>
					<div class="phone">
						<label for="phone">전화번호</label>
						<input type="text" id="phone" name="phone" th:placeholder="${session.mvo.phone}" readonly />
					</div>
					<div class="email">
						<label for="email">이메일</label>
						<input type="email" id="email" name="email" size="40" th:placeholder="${session.mvo.email}"
							readonly />
					</div>
					<div>
						<input type="submit" value="수정 완료" class="updateBtn" />
					</div>
					<div>
						<input type="button" class="updatePwBtn" onclick="location.href='/member/updatePassword'"
							value="비밀번호 변경하기">
					</div>
					<div>
						<span class="deleteBtn" onclick="deleteMember();">회원탈퇴</span>
					</div>
				</form>
			</div>
		</main>

	</div>
</body>

</html>